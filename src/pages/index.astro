---
import { getCollection } from 'astro:content';
import Main from '../components/Main.astro';
import ArticleLatestList from '../components/ArticleLatestList.astro';
import ArticlePopularList from '../components/ArticlePopularList.astro';
import Layout from '../layouts/Layout.astro';

const allArticles = await getCollection("articles");
const sortedArticles = allArticles.sort((a, b) => a.data.date.getUTCFullYear() - b.data.date.getUTCFullYear()).reverse();
const latestArticles = sortedArticles.slice(0, 3);
const featuredArticles = sortedArticles.filter(article => article.data.featured).slice(0, 3);
---

<Layout title="Jeyhun Abbasov">
	<Main>
		<div class="flex flex-col md:flex-row gap-12 md:gap-16">
			<!-- Left Side -->
			<div class="w-full md:w-2/3">
				<!-- Latest Articles -->
				<section>
					<h2 class="text-2xl font-bold text-text mb-12 text-center md:text-left">Latest Articles</h2>
					<ArticleLatestList articles={latestArticles}/>
					<div class="mt-12 text-center">
						<a href="/blog" class="border rounded-lg px-8 py-3 font-medium hover:text-blue-300">
							Show More
						</a>
					</div>
				</section>
			</div>

			<!-- Right Side -->
			<div class="w-full md:w-1/3 md:sticky md:top-24">
				<!-- Popular Articles -->
				<section class="mt-12">
					<h2 class="text-xl font-bold text-text mb-6 text-center md:text-left">Featured Articles</h4>
					<ArticlePopularList articles={featuredArticles}/>
				</section>
			</div>
		</div>
	</Main>
</Layout>
